<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Cupid</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="static/home.css">
</head>
<body>
<div class="home-layout d-flex">
    <!-- Sidebar -->
    <aside class="home-sidebar d-flex flex-column">
        <div class="sidebar-header px-3 py-3">
            <span class="brand-title fs-5 fw-bold">cupid.ai</span>
        </div>
        <div class="sidebar-section px-3">
            <div class="text-muted small mb-2">Functions</div>
            <ul class="list-unstyled function-list">
                <li class="mb-3">
                    <a href="/users" class="function-btn d-flex align-items-center">
                        <i class="fas fa-comments fa-lg me-2"></i> <span>Chat</span>
                    </a>
                </li>
                <li class="mb-3">
                    <a href="/dicovery" class="function-btn d-flex align-items-center">
                        <i class="fas fa-compass fa-lg me-2"></i> <span>Discover</span>
                    </a>
                </li>
                <li class="mb-3">
                    <a href="/user_profile" class="function-btn d-flex align-items-center">
                        <i class="fas fa-user fa-lg me-2"></i> <span>Profile</span>
                    </a>
                </li>
                <li>
                    <a href="/user_settings" class="function-btn d-flex align-items-center">
                        <i class="fas fa-cog fa-lg me-2"></i> <span>Settings</span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="sidebar-footer mt-auto px-3 pb-3">
            <a href="/user_settings" class="d-flex align-items-center user-center-link">
                <img src="https://randomuser.me/api/portraits/women/1.jpg" class="avatar-lg me-2" id = "avatar">
                <span class="fw-semibold" id = "nickname">BrightAlbatross5487</span>
            </a>
        </div>
    </aside>
    <!-- Main Content -->
    <main class="home-main flex-grow-1 p-4">
        <div class="d-flex align-items-center mb-4">
            <span class="welcome-text fs-5 fw-semibold me-2">Welcome back,</span>
            <span class="nickname fw-bold text-primary">BrightAlbatross5487</span>
        </div>
        <div class="row g-4">
            <div class="col-12">
                <h6 class="fw-bold mb-3 text-start">Recommended for you</h6>
                <div class="row">
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Internet Stranger</div>
                                <div class="character-subtitle">由 @quantum 创建</div>
                                <div class="character-desc">That guy you talked to once at 3 A.M.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>21.5m</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Sharing a bed</div>
                                <div class="character-subtitle">由 @sleepii 创建</div>
                                <div class="character-desc">Sharing a bed with your enemy.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>231.3m</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/men/12.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Jungkook</div>
                                <div class="character-subtitle">由 @Gawlgloose 创建</div>
                                <div class="character-desc">Bar. Gang Leader approaches you at the bar.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>90.0m</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Dr K - Changed</div>
                                <div class="character-subtitle">由 @kai3l 创建</div>
                                <div class="character-desc">Examines you closely. Perfect... You seem more or less like a good test subject.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>2.8m</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Internet Stranger</div>
                                <div class="character-subtitle">由 @quantum 创建</div>
                                <div class="character-desc">That guy you talked to once at 3 A.M.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>21.5m</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Sharing a bed</div>
                                <div class="character-subtitle">由 @sleepii 创建</div>
                                <div class="character-desc">Sharing a bed with your enemy.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>231.3m</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/men/12.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Jungkook</div>
                                <div class="character-subtitle">由 @Gawlgloose 创建</div>
                                <div class="character-desc">Bar. Gang Leader approaches you at the bar.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>90.0m</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Dr K - Changed</div>
                                <div class="character-subtitle">由 @kai3l 创建</div>
                                <div class="character-desc">Examines you closely. Perfect... You seem more or less like a good test subject.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>2.8m</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 mt-4">
                <h6 class="fw-bold mb-3 text-start">Trending</h6>
                <div class="row">
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Internet Stranger</div>
                                <div class="character-subtitle">由 @quantum 创建</div>
                                <div class="character-desc">That guy you talked to once at 3 A.M.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>21.5m</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Sharing a bed</div>
                                <div class="character-subtitle">由 @sleepii 创建</div>
                                <div class="character-desc">Sharing a bed with your enemy.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>231.3m</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/men/12.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Jungkook</div>
                                <div class="character-subtitle">由 @Gawlgloose 创建</div>
                                <div class="character-desc">Bar. Gang Leader approaches you at the bar.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>90.0m</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Dr K - Changed</div>
                                <div class="character-subtitle">由 @kai3l 创建</div>
                                <div class="character-desc">Examines you closely. Perfect... You seem more or less like a good test subject.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>2.8m</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Internet Stranger</div>
                                <div class="character-subtitle">由 @quantum 创建</div>
                                <div class="character-desc">That guy you talked to once at 3 A.M.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>21.5m</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Sharing a bed</div>
                                <div class="character-subtitle">由 @sleepii 创建</div>
                                <div class="character-desc">Sharing a bed with your enemy.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>231.3m</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/men/12.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Jungkook</div>
                                <div class="character-subtitle">由 @Gawlgloose 创建</div>
                                <div class="character-desc">Bar. Gang Leader approaches you at the bar.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>90.0m</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 mb-4">
                        <div class="card character-card flex-row align-items-center p-3">
                            <div class="character-avatar me-3">
                                <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="avatar">
                            </div>
                            <div class="character-info flex-grow-1">
                                <div class="character-title">Dr K - Changed</div>
                                <div class="character-subtitle">由 @kai3l 创建</div>
                                <div class="character-desc">Examines you closely. Perfect... You seem more or less like a good test subject.</div>
                                <div class="character-meta mt-2"><i class="fas fa-comment-dots me-1"></i>2.8m</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    fetch('/get_user_info', {
        method: 'GET',
        credentials: 'include' // 保证带上cookie/session
    })
    .then(async res => {
        if (res.status === 401) {
            // 未登录，跳转到登录页
            window.location.href = '/login_register';
            return;
        }
        // 也可能后端返回200但内容表明未登录
        const data = await res.json();
        if (data.status && data.status === 'not_logged_in') {
            window.location.href = '/login_register';
            return;
        }
        // 你可以在这里用data渲染页面
        document.querySelector('#nickname').textContent = data.information.nickname;
        document.querySelector('.nickname').textContent = data.information.nickname;
        document.querySelector('#avatar').src = data.information.avatar;
    })
    .catch(() => {
        // 网络错误也跳转
        window.location.href = '/login_register';
    });
});
</script>
</body>
</html> 